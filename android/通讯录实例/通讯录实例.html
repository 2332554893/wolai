<!DOCTYPE html>
<html lang="zh-Hans-CN"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=Edge"/><link rel="stylesheet" type="text/css" href="../../css/modern-norm.min.css"/><link rel="stylesheet" type="text/css" href="../../css/prism.min.css"/><link rel="stylesheet" type="text/css" href="../../css/katex.min.css"/><link rel="stylesheet" type="text/css" href="../../css/wolai.css"/><title>通讯录实例 - wolai 笔记</title><link rel="shortcut icon" href="data:image/svg+xml,%3Csvg xmlns=&apos;http://www.w3.org/2000/svg&apos; viewBox=&apos;0 0 800 800&apos;%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fff;%7D%3C/style%3E%3C/defs%3E%3Cg%3E%3Cpath class=&apos;cls-1&apos; d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Z&apos;/%3E%3Cpath d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Zm4.72,88.9H185.2L172.42,89c-32.78.62-43.68,3.24-54.71,9.14a45.84,45.84,0,0,0-19.54,19.54c-6.61,12.36-9.11,24.55-9.27,67.49V614.8L89,627.58c.62,32.78,3.24,43.68,9.14,54.71a45.84,45.84,0,0,0,19.54,19.54c12.36,6.61,24.55,9.11,67.49,9.27H610.08c46.79,0,59.41-2.44,72.21-9.28a45.84,45.84,0,0,0,19.54-19.54c6.61-12.36,9.11-24.55,9.27-67.49V189.92c0-46.79-2.44-59.41-9.28-72.21a45.84,45.84,0,0,0-19.54-19.54C669.93,91.56,657.74,89.06,614.8,88.9ZM233.33,493.33A73.34,73.34,0,1,1,160,566.67,73.35,73.35,0,0,1,233.33,493.33Z&apos;/%3E%3C/g%3E%3C/svg%3E"></link></head><body><header><div class="image"></div><div class="title"><div class="banner"><div class="icon"></div></div><div data-title="通讯录实例" class="main-title"></div></div></header><article><h2 class="wolai-block"><span class="inline-wrap">1、组件间的通讯</span></h2><h4 class="wolai-block"><span class="inline-wrap">（1）在<span class="jill"></span>AndroidManifest.xml<span class="jill"></span>中添加</span></h4><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token operator">&lt;</span>activity
            android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">"要添加的文件名（.java）"</span>
            android<span class="token operator">:</span>exported<span class="token operator">=</span><span class="token string">"true"</span> <span class="token operator">/</span><span class="token operator">></span></pre></div></code-block><h4 class="wolai-block"><span class="inline-wrap">（2）然后在<span class="jill"></span>MainActivity.java<span class="jill"></span>中添加调用函数</span><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token comment">//跳转页面</span>
  <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">passDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token class-name">Intent</span> intent<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Intent</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>second<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//second.class是我要跳转的名</span>
      <span class="token function">startActivity</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span></pre></div></code-block></h4><h4 class="wolai-block"><span class="inline-wrap">(3)在新建的<span class="jill"></span>Java<span class="jill"></span>文件下添加</span></h4><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Input</span> <span class="token keyword">extends</span> <span class="token class-name">Activity</span> <span class="token punctuation">{</span>   <span class="token comment">//Input  == 在上面引用的文件名（.java）</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>input<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//R.layout.input ==页面名</span>
       
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre></div></code-block><h4 class="wolai-block"><span class="inline-wrap">（4）注：组件间传递数据</span></h4><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token comment">//传递数据创建数据流</span>
<span class="token class-name">Intent</span> intent2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intent</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token class-name">MainActivity</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//将数据存入对象</span>
intent2<span class="token punctuation">.</span><span class="token function">putExtra</span><span class="token punctuation">(</span><span class="token string">"key"</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
intent2<span class="token punctuation">.</span><span class="token function">putExtra</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> mEtName<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
intent2<span class="token punctuation">.</span><span class="token function">putExtra</span><span class="token punctuation">(</span><span class="token string">"phone"</span><span class="token punctuation">,</span> mEtPhone<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
intent2<span class="token punctuation">.</span><span class="token function">putExtra</span><span class="token punctuation">(</span><span class="token string">"email"</span><span class="token punctuation">,</span> mEtEmail<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token function">startActivity</span><span class="token punctuation">(</span>intent2<span class="token punctuation">)</span><span class="token punctuation">;</span>                                        </pre></div></code-block><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token class-name">Intent</span> intent2 <span class="token operator">=</span> <span class="token function">getIntent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//接收到组件二传回的信息</span>
<span class="token class-name">String</span> key <span class="token operator">=</span> intent2<span class="token punctuation">.</span><span class="token function">getStringExtra</span><span class="token punctuation">(</span><span class="token string">"key"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> name <span class="token operator">=</span> intent2<span class="token punctuation">.</span><span class="token function">getStringExtra</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> phone <span class="token operator">=</span> intent2<span class="token punctuation">.</span><span class="token function">getStringExtra</span><span class="token punctuation">(</span><span class="token string">"phone"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token class-name">String</span> email <span class="token operator">=</span> intent2<span class="token punctuation">.</span><span class="token function">getStringExtra</span><span class="token punctuation">(</span><span class="token string">"email"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><h2 class="wolai-block"><span class="inline-wrap">2、数据库代码</span></h2><h4 class="wolai-block"><span class="inline-wrap">（1）初始化数据库</span></h4><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token comment">//创建数据库</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyHelper</span> <span class="token keyword">extends</span> <span class="token class-name">SQLiteOpenHelper</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">MyHelper</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//初始化数据库</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> <span class="token string">"AddressBook.db"</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token class-name">SQLiteDatabase</span> db<span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token comment">//创建数据库</span>
        db<span class="token punctuation">.</span><span class="token function">execSQL</span><span class="token punctuation">(</span><span class="token string">"create table information("</span><span class="token operator">+</span>
                   <span class="token string">"id integer primary key autoincrement,"</span> <span class="token operator">+</span>
                   <span class="token string">"name varchar(20),"</span> <span class="token operator">+</span> 
                   <span class="token string">"phone varchar(20),"</span> <span class="token operator">+</span> 
                   <span class="token string">"email varchar(20))"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token comment">//创建 表information，添加四个列</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onUpgrade</span><span class="token punctuation">(</span><span class="token class-name">SQLiteDatabase</span> db<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> i1<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">//更新表</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//注：这两个函数必须存在</span></pre></div></code-block><h4 class="wolai-block"><span class="inline-wrap">（2）添加数据</span></h4><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">setmBtnAdd</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">String</span> phone<span class="token punctuation">,</span> <span class="token class-name">String</span> email<span class="token punctuation">,</span> <span class="token class-name">SQLiteDatabase</span> db<span class="token punctuation">,</span> <span class="token class-name">ContentValues</span> values<span class="token punctuation">)</span> <span class="token comment">//添加数据</span>
    <span class="token punctuation">{</span>
        db <span class="token operator">=</span> myHelper<span class="token punctuation">.</span><span class="token function">getWritableDatabase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//获取可读写对象</span>
        values <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ContentValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        values<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        values<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"phone"</span><span class="token punctuation">,</span> phone<span class="token punctuation">)</span><span class="token punctuation">;</span>
        values<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"email"</span><span class="token punctuation">,</span> email<span class="token punctuation">)</span><span class="token punctuation">;</span>
        db<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"information"</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> values<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Toast</span><span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"联系人创建完成"</span><span class="token punctuation">,</span> <span class="token class-name">Toast</span><span class="token punctuation">.</span>LENGTH_SHORT<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        db<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span></pre></div></code-block><h4 class="wolai-block"><span class="inline-wrap">（3）显示数据</span></h4><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setmBtnQuery</span><span class="token punctuation">(</span><span class="token class-name">SQLiteDatabase</span> db<span class="token punctuation">)</span> <span class="token comment">//显示数据</span>
    <span class="token punctuation">{</span>
        db <span class="token operator">=</span> myHelper<span class="token punctuation">.</span><span class="token function">getReadableDatabase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Cursor</span> cursor <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token string">"information"</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>cursor<span class="token punctuation">.</span><span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            mTvShow<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Toast</span><span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"没有数据"</span><span class="token punctuation">,</span> <span class="token class-name">Toast</span><span class="token punctuation">.</span>LENGTH_SHORT<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            cursor<span class="token punctuation">.</span><span class="token function">moveToFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            mTvShow<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"\n姓名："</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>cursor<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"\n电话："</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>cursor<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"\nE-mail："</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>cursor<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>cursor<span class="token punctuation">.</span><span class="token function">moveToNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            mTvShow<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>
                <span class="token string">"\n姓名："</span> <span class="token operator">+</span> cursor<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span>
                <span class="token string">"\n电话："</span> <span class="token operator">+</span> cursor<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span>
                <span class="token string">"\nE-mail："</span> <span class="token operator">+</span> cursor<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">+</span> 
                <span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        cursor<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        db<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span></pre></div></code-block><h4 class="wolai-block"><span class="inline-wrap">（4）修改数据</span></h4><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setmBtnUpdate</span><span class="token punctuation">(</span><span class="token class-name">String</span> phone<span class="token punctuation">,</span> <span class="token class-name">String</span> email<span class="token punctuation">,</span> <span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token comment">//修改数据</span>
    <span class="token punctuation">{</span>
        db <span class="token operator">=</span> myHelper<span class="token punctuation">.</span><span class="token function">getWritableDatabase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//db.execSQL("update information set phone=? where name=?",new Object[]{phone,name});  //可直接完成修改数据（但不能计数）</span>
        values <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ContentValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        values<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"phone"</span><span class="token punctuation">,</span> phone<span class="token punctuation">)</span><span class="token punctuation">;</span>
        values<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"email"</span><span class="token punctuation">,</span> email<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> number <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token string">"information"</span><span class="token punctuation">,</span> values<span class="token punctuation">,</span> <span class="token string">"name=?"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span>name <span class="token operator">+</span> <span class="token string">""</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        db<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Toast</span><span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> number <span class="token operator">+</span> <span class="token string">"条联系人被更改"</span><span class="token punctuation">,</span> <span class="token class-name">Toast</span><span class="token punctuation">.</span>LENGTH_SHORT<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setmBtnQuery</span><span class="token punctuation">(</span>db<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

  </pre></div></code-block><h4 class="wolai-block"><span class="inline-wrap">（5）删除数据</span><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setmBtnDelete</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token comment">//删除数据    {        db = myHelper.getWritableDatabase();        //  db.execSQL("delete from information where name="+name);  //可直接完成删除数据(但不能计数)        int number = db.delete("information", "name=?", new String[]{name + ""});        //int number1 = db.delete("information",null,null);  //删除所有数据        db.close();        Toast.makeText(this, number + "条联系人被删除", Toast.LENGTH_SHORT).show();        setmBtnQuery(db);    }</span></pre></div></code-block></h4><h2 class="wolai-block"><span class="inline-wrap">3、列表标签</span></h2><h4 class="wolai-block"><span class="inline-wrap">(1)定义列表标签</span><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token operator">&lt;</span><span class="token class-name">ListView</span>        android<span class="token operator">:</span>id<span class="token operator">=</span><span class="token string">"@+id/lv_show"</span>        android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string">"match_parent"</span>        android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string">"match_parent"</span>        android<span class="token operator">:</span>layout_below<span class="token operator">=</span><span class="token string">"@+id/ll_btn"</span>        android<span class="token operator">:</span>layout_marginStart<span class="token operator">=</span><span class="token string">"5dp"</span>        android<span class="token operator">:</span>layout_marginTop<span class="token operator">=</span><span class="token string">"5dp"</span>        android<span class="token operator">:</span>layout_marginEnd<span class="token operator">=</span><span class="token string">"5dp"</span>        android<span class="token operator">:</span>layout_marginBottom<span class="token operator">=</span><span class="token string">"5dp"</span>        android<span class="token operator">:</span>divider<span class="token operator">=</span><span class="token string">"#d9d9d9"</span>        android<span class="token operator">:</span>dividerHeight<span class="token operator">=</span><span class="token string">"1dp"</span> <span class="token operator">/</span><span class="token operator">></span></pre></div></code-block></h4><h4 class="wolai-block"><span class="inline-wrap">(2)新建一个<span class="jill"></span>item<span class="jill"></span>的<span class="jill"></span>xml<span class="jill"></span>文件（用来接收输入的数据）</span></h4><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"utf-8"</span><span class="token operator">?</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token class-name">RelativeLayout</span> xmlns<span class="token operator">:</span>android<span class="token operator">=</span><span class="token string">"http://schemas.android.com/apk/res/android"</span>    android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string">"match_parent"</span>    android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string">"match_parent"</span>    android<span class="token operator">:</span>gravity<span class="token operator">=</span><span class="token string">"center_vertical"</span>    android<span class="token operator">:</span>orientation<span class="token operator">=</span><span class="token string">"vertical"</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token class-name">ImageView</span>        android<span class="token operator">:</span>id<span class="token operator">=</span><span class="token string">"@+id/item_image"</span>        android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string">"60dp"</span>        android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string">"60dp"</span>        android<span class="token operator">:</span>layout_marginLeft<span class="token operator">=</span><span class="token string">"8dp"</span>        android<span class="token operator">:</span>layout_marginRight<span class="token operator">=</span><span class="token string">"8dp"</span>        android<span class="token operator">:</span>layout_marginTop<span class="token operator">=</span><span class="token string">"8dp"</span>        android<span class="token operator">:</span>layout_marginBottom<span class="token operator">=</span><span class="token string">"8dp"</span>        android<span class="token operator">:</span>background<span class="token operator">=</span><span class="token string">"@drawable/null1"</span> <span class="token operator">/</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token class-name">TextView</span>        android<span class="token operator">:</span>id<span class="token operator">=</span><span class="token string">"@+id/item_tv1"</span>        android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string">"match_parent"</span>        android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string">"wrap_content"</span>        android<span class="token operator">:</span>layout_toRightOf<span class="token operator">=</span><span class="token string">"@+id/item_image"</span>        android<span class="token operator">:</span>gravity<span class="token operator">=</span><span class="token string">"center_vertical"</span>        android<span class="token operator">:</span>layout_marginTop<span class="token operator">=</span><span class="token string">"8dp"</span>        android<span class="token operator">:</span>text<span class="token operator">=</span><span class="token string">"item1"</span>        android<span class="token operator">:</span>textSize<span class="token operator">=</span><span class="token string">"24sp"</span>        android<span class="token operator">:</span>textStyle<span class="token operator">=</span><span class="token string">"bold"</span> <span class="token operator">/</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token class-name">TextView</span>        android<span class="token operator">:</span>id<span class="token operator">=</span><span class="token string">"@+id/item_tv2"</span>        android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string">"match_parent"</span>        android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string">"wrap_content"</span>        android<span class="token operator">:</span>layout_below<span class="token operator">=</span><span class="token string">"@+id/item_tv1"</span>        android<span class="token operator">:</span>layout_toRightOf<span class="token operator">=</span><span class="token string">"@+id/item_image"</span>        android<span class="token operator">:</span>layout_marginTop<span class="token operator">=</span><span class="token string">"4dp"</span>        android<span class="token operator">:</span>gravity<span class="token operator">=</span><span class="token string">"center_vertical"</span>        android<span class="token operator">:</span>textColor<span class="token operator">=</span><span class="token string">"#ADB0B5"</span>        android<span class="token operator">:</span>text<span class="token operator">=</span><span class="token string">"item2"</span>        android<span class="token operator">:</span>textSize<span class="token operator">=</span><span class="token string">"18sp"</span>        android<span class="token operator">:</span>textStyle<span class="token operator">=</span><span class="token string">"bold"</span> <span class="token operator">/</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token class-name">RelativeLayout</span><span class="token operator">></span></pre></div></code-block><h4 class="wolai-block"><span class="inline-wrap">(3)设置配置列表</span></h4><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token comment">//设置列表public class MyBaseAdapter extends BaseAdapter {    private final MainActivity mainActivity;    public MyBaseAdapter(MainActivity mainActivity) {        this.mainActivity = mainActivity;    }    @Override    public int getCount() {  //得到item总数        return mainActivity.items1.length-1;    }    @Override    public Object getItem(int position) {//得到item代表的对象        return mainActivity.items1[position+1];    }    @Override    public long getItemId(int position) {//得到item的id        return position+1;    }    @Override    public View getView(int position, View convertView, ViewGroup parent) {  //将Item转为view对象        View view = View.inflate(mainActivity, R.layout.list_item, null);        TextView mTextView1 = (TextView) view.findViewById(R.id.item_tv1);        TextView mTextView2= (TextView) view.findViewById(R.id.item_tv2);        mTextView1.setText(mainActivity.items1[position+1]);mTextView2.setText(mainActivity.items2[position+1]);        return view;    }}</span></pre></div></code-block><h4 class="wolai-block"><span class="inline-wrap">(4)在<span class="jill"></span>MainActivity.java<span class="jill"></span>中 添加实例</span><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="Java" class="marker"></div><pre>mListView <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">ListView</span><span class="token punctuation">)</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>lv_show<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//初始化listview控件        MyBaseAdapter mAdapter = new MyBaseAdapter(this);//设置Adapter的实例        mListView.setAdapter(mAdapter);//设置Adapter</span></pre></div></code-block></h4><h2 class="wolai-block"><span class="inline-wrap">4.遇见问题与解决</span></h2><h4 class="wolai-block"><span class="inline-wrap">(1)做列表数据的时候出现了闪退</span></h4><h4 class="wolai-block"><span class="inline-wrap">原因：未知</span></h4><h4 class="wolai-block"><span class="inline-wrap">解决方法：添加判断，在<span class="jill"></span>items<span class="jill"></span>数组为空时，直接添加一段代码</span><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token keyword">if</span> <span class="token punctuation">(</span>items1 <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">Method</span><span class="token punctuation">.</span><span class="token function">getBtnAdd</span><span class="token punctuation">(</span><span class="token string">"暂无数据"</span><span class="token punctuation">,</span> <span class="token string">"   "</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//当items为空时，自动添加一条数据，防止listview无数据时，出现的闪屏问题        }</span></pre></div></code-block></h4><h4 class="wolai-block"><span class="inline-wrap">(2)可以通过返回不同的 key 来对跳转页进行控制</span></h4><h4 class="wolai-block"><span class="inline-wrap">注意：主函数也要进行添加返回的监听</span></h4><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">switch</span> <span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">case</span> <span class="token string">"添加"</span><span class="token operator">:</span>                    <span class="token class-name">Method</span><span class="token punctuation">.</span><span class="token function">getBtnAdd</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> phone<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">case</span> <span class="token string">"查询"</span><span class="token operator">:</span>                    <span class="token class-name">Method</span><span class="token punctuation">.</span><span class="token function">getBtnQuery2</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">case</span> <span class="token string">"修改"</span><span class="token operator">:</span>                    <span class="token class-name">Method</span><span class="token punctuation">.</span><span class="token function">getBtnUpdate</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> phone<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">case</span> <span class="token string">"删除"</span><span class="token operator">:</span>                    <span class="token class-name">Method</span><span class="token punctuation">.</span><span class="token function">getBtnDelete</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span></pre></div></code-block><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token comment">//点击事件的操作    @Override    public void onClick(View v) {        switch (v.getId()) {            case R.id.btn_add:                passDate("添加");                break;            case R.id.btn_query:                passDate("查询");                break;            case R.id.btn_update:                passDate("修改");                break;            case R.id.btn_delete:                passDate("删除");                break;        }    }</span></pre></div></code-block><h4 class="wolai-block"><span class="inline-wrap">(3)抽取类</span></h4><h4 class="wolai-block"><span class="inline-wrap">a.创建类</span></h4><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Method</span> <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">title</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">String</span> steam<span class="token operator">=</span><span class="token string">"222"</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> steam<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></pre></div></code-block><h4 class="wolai-block"><span class="inline-wrap">b.主函数下通过 new 实例来调用类</span></h4><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token class-name">XXX</span> x1<span class="token operator">=</span><span class="token keyword">new</span>  <span class="token class-name">Method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//new 一个实例x1.title();  //使用其中的方法</span></pre></div></code-block></article><footer></footer></body></html>